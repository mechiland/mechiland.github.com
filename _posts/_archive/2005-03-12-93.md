--- 
layout: post
status: publish
type: post
published: true
title: "让异常信息更容易理解"
---
花了15分钟的时间，给报表框架改善了异常信息的显示。当在xml定义文件中定义了某一位置的单元格，而在相应的Excel模板文件不存在该单元格时，以前的出错信息是：
<code>ReportException: 单元格(2,3)不存在，请检查模板文件</code>

这个2,3并不容易理解，很多报表的开发人员都无法一瞬间定位到这个单元格。我将Excel中的横向坐标(用A-Z表示)加入了其中，改善后的异常信息如下：
<code>ReportException: 单元格B3不存在，请检查模板文件中对应单元格</code>

这下清楚了，开发者一下就可以看到哪个单元格出了问题。

ps. 关于这个报表框架，还有一个有趣的事情。有一位同事拿代码去测试，后来问我：为什么你的代码没什么问题？我说，因为我自己的单元测试比你的测试更细致。他不信，于是我把满满的单元测试用例给他看，当他看到setUp中建立模拟数据，tearDown中删除数据，以及单元测试方法中大段大段覆盖率极大的assertXXX语句时，他不说话了。单元测试确实能够增强代码编写者的信心，我越来越坚信这一点。
